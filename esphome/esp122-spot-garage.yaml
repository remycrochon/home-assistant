substitutions:
  device_name: esp122-spot-garage
  adress_ip: "192.168.0.122"
  
esphome:
  name: ${device_name}

esp32:
  board: esp32dev
  framework:
    type: esp-idf

wifi:
  networks:
    - ssid: !secret wifi_esp
      password: !secret mdpwifi_esp
      priority: 1
    - ssid: !secret wifi
      password: !secret mdpwifi
      priority: 0
  reboot_timeout: 5min
  min_auth_mode: WPA2  
  manual_ip:
    static_ip: ${adress_ip}
    gateway: 192.168.0.254
    subnet: 255.255.255.0
    dns1: !secret dns1
    dns2: !secret dns2
    
# Utilisez la LED de l'appareil comme LED d'Ã©tat, qui clignotera s'il y a des avertissements (lent) ou des erreurs (rapide)
status_led:
  pin:
    number: GPIO23
    inverted: true
logger:
  level: debug

api:
  
ota:
  platform: esphome

web_server:
  port: 80

# Capteur de statut distant (ESP178)
binary_sensor:

  - platform: status
    name: "Status"
sensor:
  - platform: wifi_signal # Reports the WiFi signal strength/RSSI in dB
    name: "WiFi Signal dB"
    id: wifi_signal_db
    update_interval: 60s
    entity_category: "diagnostic"

  - platform: copy # Reports the WiFi signal strength in %
    source_id: wifi_signal_db
    name: "WiFi Signal Percent"
    filters:
      - lambda: return min(max(2 * (x + 100.0), 0.0), 100.0);
    unit_of_measurement: "Signal %"
    entity_category: "diagnostic"
    device_class: ""
    
switch:   
  - platform: gpio
    name: "R1"
    pin: GPIO16

  - platform: restart
    name: "Restart"
