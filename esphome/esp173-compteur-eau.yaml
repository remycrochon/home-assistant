substitutions:
  device_name: esp173-cpt-eau
  adress_ip: "192.168.0.173"
  friendly_name: esp173
  time_timezone: "Europe/Paris"
  
esphome:
  name: ${device_name}
  platform: ESP8266
  board: d1_mini
  on_boot:
    priority: -10
    then:
    - wait_until:
        api.connected:
    - logger.log: API is connected!
    
wifi:
  networks:
    - ssid: !secret wifi
      password: !secret mdpwifi
  reboot_timeout: 5min
  fast_connect: True
  manual_ip:
    static_ip: ${adress_ip}
    gateway: 192.168.0.254
    subnet: 255.255.255.0
    dns1: 192.168.0.192
    dns2: 192.168.0.37

# Enable logging
logger:
  level: verbose
#  logs:
#    wifi.component: debug
#    mqtt.component: debug
# Enable Home Assistant API
api:

ota:

web_server:
  port: 80


i2c:
  sda: D3
  scl: D2


mpr121:
  id: mpr121_component
  touch_threshold: 8
  release_threshold: 7


binary_sensor:
  - platform: status
    name: "${friendly_name}_Status"

  - platform: mpr121
    id: touch_key0
    channel: 0
    name: "${friendly_name}_Touch 0"

  - platform: mpr121
    id: touch_key1
    channel: 1
    name: "${friendly_name}_Touch 1"

  - platform: mpr121
    id: touch_key2
    channel: 2
    name: "${friendly_name}_Touch 2"

  - platform: mpr121
    id: touch_key3
    channel: 3
    name: "${friendly_name}_Touch 3"
   
  - platform: mpr121
    id: touch_key4
    channel: 4
    name: "${friendly_name}_Touch 4"
    
  - platform: mpr121
    id: touch_key5
    channel: 5
    name: "${friendly_name}_Touch 5"
    
  - platform: mpr121
    id: touch_key6
    channel: 6
    name: "${friendly_name}_Touch 6"        
    
  - platform: mpr121
    id: touch_key7
    channel: 7
    name: "${friendly_name}_Touch 7"

sensor:

# Informations WI_FI
  - platform: wifi_signal # Reports the WiFi signal strength/RSSI in dB
    name: "${friendly_name} WiFi Signal dB"
    update_interval: 60s

############### TEMPLATE  ######################"
# 
                    
switch:
  - platform: restart
    name: "${friendly_name} Restart"


