substitutions:
  device_name: "esp177-esp32-test"
  friendly_name: esp177
  adress_ip: "192.168.0.177"
  time_timezone: "Europe/Paris"

esphome:
  name: ${device_name}

    
esp32:
  board: esp32dev
  framework:
    type: arduino

# Enable logging
logger:
  level: DEBUG

# Enable Home Assistant API
api:

ota:
  
wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  manual_ip:
    static_ip: ${adress_ip}
    gateway: 192.168.0.254
    subnet: 255.255.255.0

web_server:
  port: 80

captive_portal:
uart:
  id: mod_bus
  tx_pin: 17
  rx_pin: 16
  baud_rate: 9600
  stop_bits: 1
  debug:
    direction: BOTH
    dummy_receiver: false
    after:
      timeout: 150ms
    sequence:
      - lambda: |-
          UARTDebug::log_string(direction, bytes);

modbus:
#flow_control_pin: 5
  #send_wait_time: 200ms
  id: modbus1
  flow_control_pin: 5

modbus_controller:
  - id: afficheur
    ## the Modbus device addr
    address: 0x1
    modbus_id: modbus1
    update_interval: 10s
    command_throttle: 50ms
    # setup_priority: -10

sensor:  
# tension de l'alimentation
  - platform: modbus_controller
    modbus_controller_id: afficheur
    id: _niv_puit
    name: "${friendly_name}_Niveau_Puit"
    address: 0x0001
    unit_of_measurement: "ml"
    register_type: holding
    value_type: U_WORD
    accuracy_decimals: 1
    filters:
      - multiply: 1
    #register_count: 1
    #response_size: 2
number:
  - platform: modbus_controller
    modbus_controller_id: afficheur
    id: filtre_entree
    name: "${friendly_name}_Filtre_Entr√©e"
    address: 0x0101
    value_type: U_WORD
    multiply: 1000
    min_value: 0.000
    max_value: 10.000
    step: 0.1
