var PushBullet = require('.');
var options = { fullResponses : false };
var pusher = new PushBullet('o.hVBIlt8cIhJqDB0hnhKlNAcXdCHbtI8W', options);

// var stream = pusher.stream();
// stream.on('connect', function() {
// 	console.log('connected');
// 	stream.close();
// });
// stream.on('close', function() {
// 	console.log('closed');
// });
// stream.connect();

// function handleResponse(error, response) {
// 	if (error) {
// 		process.stdout.write(error);
// 		return;
// 	}

// 	process.stdout.write(response);
// }

// (async () => {
// 	let result = await pusher.me();

// 	console.log(result);
// })();

//pusher.me(handleResponse);
//pusher.devices(handleResponse);
//pusher.note('udhrSdjzWIEVDzOK', 'New Note', 'sddf 好发挥科技交流 ddd', handleResponse);
//pusher.history(handleResponse);
//pusher.deletePush('udhrSsjz2EOl2wYm', handleResponse);
//pusher.subscriptions(handleResponse);

//pusher.file('udhrSdjzWIEVDzOK', '/home/alex/projects/node-pushbullet-api/index.js', 'Test file', handleResponse);
//pusher.file('udhrSdjzWIEVDzOK', 'https://www.pushbullet.com/img/header/logo.png', 'PushBullet logo!', handleResponse);

//pusher.link('udhrSdjzWIEVDzOK', 'Link title', 'http://google.com', 'some body', handleResponse);

var stream = pusher.stream();

stream.on('connect', function() {
	console.log('Stream connected');
}).on('close', function() {
	console.log('Stream closed');
}).on('error', function(error) {
	console.log('Stream received error');
	console.log(error);
}).on('message', function(message) {
	console.log('Stream received message');
	console.log(message);
}).on('nop', function() {
	console.log('Stream received nop');
}).on('tickle', function(type) {
	console.log('Stream received tickle');
	console.log(type);
}).on('push', function(push) {
	console.log('Stream received push');
	console.log(push);
});

stream.connect();

process.on('SIGTERM', function() {
	stream.close();
});
