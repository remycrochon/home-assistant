openhasp:
  ecran01:
    objects:
      - obj: "p0b1"
        properties:
          "text_color": "{% if -30 <= state_attr('openhasp.ecran01','rssi') |int %}#00ff00{% elif -31 > state_attr('openhasp.ecran01','rssi') |int >= -50 %}#ccff00{% elif -51 > state_attr('openhasp.ecran01','rssi') |int >= -80 %}#ff9100{% else %}#ff0000{% endif %}"
      - obj: "p0b2"
        properties:
          "text": "{{ states('sensor.time') }}"
      - obj: "p0b6"
        properties:
          "text": "\uE2DC {{'%.1f' | format (states('sensor.vp2_temp_out') | round(1)) }}°C"
      - obj: "p0b7"
        properties:
          "text": "\uE6A1 {{'%.1f' | format (states('sensor.vp2_temp_in') | round(1)) }}°C"



# Affichage piscine
      - obj: "p1b131"
        properties:
          "text": "{{ states('input_number.mem_temp_piscine')|float(0) |round(1)}} C°" 

      - obj: "p1b133"  
        properties:
          "val": '{{ 1 if states("switch.ppe_filtration") == "on" else 0 }}'
          "text": '{{ "\uE12C" if is_state("switch.ppe_filtration", "on") else "\uE156" | e }}'
          "text_color": "{{ '#ff9100' if is_state('switch.ppe_filtration', 'on') else '#00ff00' }}" 
        event:
          "up":
            - service: homeassistant.toggle
              entity_id: "switch.cde_ppe_filtration"

      - obj: "p1b136"
        properties:
          "text": "{{ states('sensor.ph_piscine_ph')|float(0) |round(1)}} pH" 

      - obj: "p1b138"  
        properties:
          "val": '{{ 1 if states("cover.volet_piscine") == "on" else 0 }}'
          "text": '{{ "\uF11E" if is_state("cover.volet_piscine", "open") else "\uF11C" | e }}'
          "text_color": "{{ '#ff9100' if is_state('cover.volet_piscine', 'open') else '#00ff00' }}" 
        event:
          "up":
            - service: homeassistant.toggle
              entity_id: "cover.volet_piscine"

      - obj: "p1b141"
        properties:
          "text": "{{ states('input_text.piscine_periode_filtration')}}" 

      - obj: "p1b146"
        properties:
          "text": "{{ states('input_number.affichage_duree_filtration_piscine')}} h" 

      - obj: "p1b151"

        event:
          "changed":
            - service: input_select.select_option
              target:
                entity_id: input_select.mode_fonctionnement_piscine
              data:
                option: >
                  {% if text == "Palier" -%}
                  Palier
                  {% elif text == 'Classique' -%}
                  Classique
                  {% elif text == 'Abaque' -%}
                  Abaque
                  {% elif text == 'Horaire' -%}
                  Horaire
                  {% elif text == 'At F' -%}
                  At F
                  {% elif text == 'Ma F' -%}
                  Ma F
                  {% endif -%}
      - obj: "p1b223"
        properties:
          "text": "{{ states('sensor.pression_filtre') }} bars"              
      - obj: "p1b225"
        properties:
          "text": "{{ states('sensor.pzem_pisc_puissance') }} W"

# Page2

      - obj: "p2b121"  
        properties:
          "val": '{{ 1 if states("switch.ppe_filtration") == "on" else 0 }}'
          "text": '{{ "\uE12C" if is_state("switch.ppe_filtration", "on") else "\uE156" | e }}'
          "text_color": "{{ '#ff9100' if is_state('switch.ppe_filtration', 'on') else '#00ff00' }}" 
        event:
          "up":
            - service: homeassistant.toggle
              entity_id: "switch.cde_ppe_filtration"

      - obj: "p2b122"  
        properties:
          "val": '{{ 1 if states("switch.ppe_ph") == "on" else 0 }}'
          "text": '{{ "\uE12C" if is_state("switch.ppe_ph", "on") else "\uE156" | e }}'
          "text_color": "{{ '#ff9100' if is_state('switch.ppe_ph', 'on') else '#00ff00' }}"          
        event:
          "up":
            - service: homeassistant.toggle
              entity_id: "switch.ppe_ph"   

      - obj: "p2b123"
        properties:
          "val": '{{ 1 if states("switch.ppe_chlore") == "on" else 0 }}'
          "text": '{{ "\uE12C" if is_state("switch.ppe_chlore", "on") else "\uE156" | e }}'
          "text_color": "{{ '#ff9100' if is_state('switch.ppe_chlore', 'on') else '#00ff00' }}"
        event:
          "up":
            - service: homeassistant.toggle
              entity_id: "switch.ppe_chlore"   

      - obj: "p2b124"  
        properties:
          "val": '{{ 1 if states("switch.cde_ouv_volet_piscine") == "on" else 0 }}'
          "text": '{{ "\uE12C" if is_state("switch.cde_ouv_volet_piscine", "on") else "\uE156" | e }}'
          "text_color": "{{ '#ff9100' if is_state('switch.cde_ouv_volet_piscine', 'on') else '#00ff00' }}"
        event:
          "up":
            - service: homeassistant.toggle
              entity_id: "switch.cde_ouv_volet_piscine"

      - obj: "p2b125"  
        properties:
          "val": '{{ 1 if states("bswitch.cde_ferm_volet_piscine") == "on" else 0 }}'
          "text": '{{ "\uE12C" if is_state("switch.cde_ferm_volet_piscine", "on") else "\uE156" | e }}'
          "text_color": "{{ '#ff9100' if is_state('switch.cde_ferm_volet_piscine', 'on') else '#00ff00' }}"
        event:
          "up":
            - service: homeassistant.toggle
              entity_id: "switch.cde_ferm_volet_piscine"

      - obj: "p2b126"  
        properties:
          "val": '{{ 1 if states("switch.cde_ecl_piscine") == "on" else 0 }}'
          "text": '{{ "\uE12C" if is_state("switch.cde_ecl_piscine", "on") else "\uE156" | e }}'
          "text_color": "{{ '#ff9100' if is_state('switch.cde_ecl_piscine', 'on') else '#00ff00' }}"          
        event:
          "up":
            - service: homeassistant.toggle
              entity_id: "switch.cde_ecl_piscine"   

      - obj: "p2b127"  
        properties:
          "val": '{{ 1 if states("switch.ev_eau") == "on" else 0 }}'
          "text": '{{ "\uE12C" if is_state("switch.ev_eau", "on") else "\uE156" | e }}'
          "text_color": "{{ '#ff9100' if is_state('switch.ev_eau', 'on') else '#00ff00' }}"          
        event:
          "up":
            - service: homeassistant.toggle
              entity_id: "switch.ev_eau"   

